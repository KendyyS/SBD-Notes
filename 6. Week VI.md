## üìò My Personal Notes

### üóìÔ∏è Week 6: Integrity Constraints

#### üìç Definition and Purpose of Database
- Integrity contraints guard against accidental damage to the database, by ensuring that authorized changes to the database do not result in a loss of data consistency, example :\
  A customer must have a (non-null) phone number.
- Constraints on a single relation :
  - NOT NULL
  - UNIQUE
  - PRIMARY KEY
  - CHECK(P), where P is a predicate

#### üìç Referential Integrity
- Ensures that a value that appears in one relation for a given set of attributes also appears for a certain set of attributes in a nother relation, example :\
  if"George Orwell" is a author name appearing in one of the tuples in the books relation, then there exists a tuple in the authors relation for "George orwell".
- Foreign keys can be specified as part of the SQL create table statement, example :\
  foreign key (Author_ID) references authors\
  
- By default, a foreign key references the primary-key attributes of the referenced table.
- SQL allows a list of attributes of the referenced table.
- SQL allows a list of attributes of the referenced relation to be specified explicitly, example :\
  foreign key(Author_ID) references author (Author_ID)
- When a referential-integrity constraint is violated, the normal procedure is to reject the action that caused the violation.
- There are some alternative **ON DELETE CASCADE** or **ON DELETE SET NULL**. These two actions determine what should be done with rows that have a foreign key when the row they reference in another table is deleted.
- ON DELETE CASCADE :\
  - Function : When a row in the 'parent' table is deleted, all related rows in the 'child' table (which have a foreign key referenceing that row) are also automatically deleted.
  - Example ; if we delete George Orwell from the Authors table and the foreign key in the Books table has ON DELETE CASCADE. 
  
#### üìç Check Conditions
- Let's say we want to ensure that all books have a title of at least three characters. We could use a CHECK condition like so :\
  CREATE TABLE Books(\
  &emsp;&emsp;&emsp;Book_ID INT,\
  &emsp;&emsp;&emsp;Book_Title VARCHAR(255)\
  &emsp;&emsp;&emsp;&emsp;&emsp;CHECK(LENGTH(Book_Title) >= 3),\
  &emsp;&emsp;&emsp;Author_ID INT\
  );
- If we try to add a new book with a title less than three characters the CHECK condition would prevent this insertion.\
  INSERT INTO Books(Book_Title, Author_ID)VALUES('Of',3);
- The above query would fail due to the CHECK condition.

#### üìç Assertion
- An assertion is a condition declared over multiple tables. Suppose we want to ensure that the average salary of authors must be below a certain value across all authors in the database. Here's how it moght look:\
  CREATE ASSERTION Authors_Salary_Assertion\
  CHECK(\
  &emsp;&emsp;&emsp;SELECT AVG(Salary)\
  &emsp;&emsp;&emsp;FROM Authors\
  &emsp;&emsp;&emsp;WHERE Salary IS NOT NULL\
  ) < 70000;
- If we try to update the library:\
  UPDATE Authors\
  SET Salary = 75000\
  WHERE Author_Name = 'J.K>Rowling';
  If the update makes he average salary exceed the limit defined in the assertion (70000 in this case), the update operation will fail.

#### üìç Index Creation
- In database management, efficiently retrieving data is crucial for performance. While many queries only target a subset of records, without an organized retrieval method, the system might inefficiently scan through all records, which can be resource-intensive. This is where an index becomes invaluable.
- An index, created using the crate index command, is data structure that enables the database system to locate tuples with a specific attribute value in a relation swiftly and without needing to scan every tuple.
- This not only enhances query performance but also ensures a asmoother and faster data retrieval process, especially in large datasets.
- Example Syntax to create an index :\
  CREATE INDEX <index_name> ON <relation_name>(attribute_name);\
- Example :\
  
